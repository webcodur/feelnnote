# 백오피스 (Admin)

## 개요

Feel&Note 서비스 운영을 위한 관리자 도구. 사용자 관리, 콘텐츠 관리, 통계 조회, 시스템 설정 등 운영에 필요한 기능 제공.

---

## 접근 권한

### 관리자 역할

| 역할 | 권한 | 설명 |
|------|------|------|
| super_admin | 전체 권한 | 시스템 설정, 관리자 계정 관리 포함 |
| admin | 운영 권한 | 사용자/콘텐츠 관리, 통계 조회 |
| moderator | 콘텐츠 권한 | 신고 처리, 콘텐츠 검토 |

### 인증 방식

- 일반 사용자와 동일한 Supabase Auth 사용
- `profiles.role` 필드로 권한 구분
- 별도 도메인/포트로 접근 (보안)

---

## 주요 기능

### 1. 대시보드

서비스 전반의 현황을 한눈에 파악.

#### 실시간 지표
- 현재 접속자 수
- 오늘 신규 가입자
- 오늘 생성된 기록 수
- 활성 사용자 (DAU/WAU/MAU)

#### 트렌드 차트
- 일별/주별/월별 가입자 추이
- 카테고리별 콘텐츠 등록 추이
- 기록 유형별 작성 추이

---

### 2. 사용자 관리

#### 사용자 목록
| 필드 | 설명 |
|------|------|
| ID | 사용자 UUID |
| 닉네임 | 표시 이름 |
| 이메일 | 로그인 이메일 |
| 가입일 | 계정 생성일 |
| 최근 접속 | 마지막 로그인 |
| 역할 | user / admin / super_admin |
| 상태 | active / suspended / deleted |

#### 사용자 상세
- 프로필 정보 조회
- 활동 내역 (기록, 좋아요, 댓글)
- 소셜 관계 (팔로잉/팔로워)
- 보유 칭호
- 로그인 이력

#### 사용자 관리 액션
| 액션 | 설명 |
|------|------|
| 정지 | 일시 정지 (기간 설정) |
| 영구 정지 | 계정 영구 비활성화 |
| 해제 | 정지 상태 해제 |
| 역할 변경 | 관리자 권한 부여/회수 |

---

### 3. 콘텐츠 관리

#### 콘텐츠 목록
- 검색 (제목, 작가/감독)
- 필터 (카테고리, 등록일)
- 정렬 (등록일, 인기순)

#### 콘텐츠 상세
- 메타데이터 조회/수정
- 연결된 사용자 기록 목록
- 관련 신고 내역

#### 콘텐츠 관리 액션
| 액션 | 설명 |
|------|------|
| 수정 | 메타데이터 수정 |
| 숨김 | 검색/노출 제외 |
| 병합 | 중복 콘텐츠 통합 |
| 삭제 | 콘텐츠 완전 삭제 |

---

### 4. 기록/피드 관리

#### 기록 검토
- 신고된 기록 목록
- 기록 상세 조회
- 기록 숨김/삭제

#### 댓글 관리
- 신고된 댓글 목록
- 댓글 숨김/삭제

---

### 5. 신고 관리

#### 신고 목록
| 필드 | 설명 |
|------|------|
| 신고자 | 신고한 사용자 |
| 대상 | 기록/댓글/사용자 |
| 유형 | 스팸, 욕설, 스포일러, 기타 |
| 상태 | pending / resolved / rejected |
| 처리자 | 담당 관리자 |

#### 신고 처리 플로우
```
신고 접수 → 검토 → 조치(숨김/삭제/정지) → 완료
                 → 기각 → 완료
```

---

### 6. 칭호/업적 관리

#### 칭호 목록
- 전체 칭호 조회
- 칭호 추가/수정/삭제
- 해금 조건 설정

#### 칭호 부여
- 특정 사용자에게 칭호 수동 부여
- 이벤트 칭호 일괄 부여

---

### 7. 시스템 설정

#### 서비스 설정
| 항목 | 설명 |
|------|------|
| 점검 모드 | 서비스 일시 중단 |
| 가입 제한 | 신규 가입 차단 |
| 기능 토글 | 특정 기능 on/off |

#### 외부 API 관리
- API 키 관리 (알라딘, TMDB 등)
- API 사용량 모니터링
- 호출 실패 로그

---

### 8. 로그/모니터링

#### 관리자 활동 로그
- 누가, 언제, 무엇을 했는지 기록
- 민감한 작업 추적 (삭제, 정지 등)

#### 시스템 로그
- 에러 로그
- API 호출 로그
- 성능 메트릭

---

## 화면 구성

```
백오피스 레이아웃
├── 사이드바 (네비게이션)
│   ├── 대시보드
│   ├── 사용자 관리
│   ├── 콘텐츠 관리
│   ├── 기록 관리
│   ├── 신고 관리
│   ├── 칭호 관리
│   └── 설정
├── 헤더 (관리자 정보, 로그아웃)
└── 메인 콘텐츠 영역
```

---

## 우선순위

### Phase 1 (필수)
- [ ] 관리자 로그인
- [ ] 대시보드 (기본 지표)
- [ ] 사용자 목록/상세
- [ ] 사용자 정지/해제

### Phase 2 (운영)
- [ ] 콘텐츠 목록/상세
- [ ] 기록 검토
- [ ] 신고 처리

### Phase 3 (고도화)
- [ ] 상세 통계/차트
- [ ] 칭호 관리
- [ ] 시스템 설정
- [ ] 활동 로그

---

## 보안 고려사항

1. **접근 제어**: 관리자 권한 없는 사용자는 접근 불가
2. **감사 로그**: 모든 관리 작업 기록
3. **민감 정보**: 사용자 비밀번호 등 민감 정보 노출 금지
4. **세션 관리**: 관리자 세션 타임아웃 설정
5. **IP 제한**: 필요시 특정 IP만 접근 허용 (선택)

---

*06_백오피스.md - 최종 수정: 2025-12-15*
