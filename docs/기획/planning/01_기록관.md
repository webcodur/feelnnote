# 기록관 (Archive)

## 개요

기록관은 사용자의 모든 문화 콘텐츠를 관리하는 핵심 공간이다. 콘텐츠를 추가하고, 상태와 진행도를 관리하며, 리뷰/노트/창작을 기록한다.

---

## 카테고리

### 지원 카테고리

| 카테고리 | 아이콘 | 범위 | API |
|----------|--------|------|-----|
| 도서 | 📚 | 소설, 에세이, 자기계발, 만화, 웹소설 | 알라딘 |
| 영화 | 🎬 | 극장 개봉작, OTT 영화, 단편 | TMDB |
| 드라마 | 📺 | TV 드라마, OTT 시리즈, 웹드라마 | TMDB |
| 애니메이션 | 🎌 | 일본 애니, 극장판, 웹애니 | - |
| 게임 | 🎮 | 콘솔, PC, 모바일 | - |
| 공연 | 🎭 | 연극, 뮤지컬, 콘서트, 전시 | - |

---

## 콘텐츠 관리

### 상태

| 상태 | 값 | 설명 |
|------|-----|------|
| 관심 | WISH | 나중에 볼 예정 |
| 감상 중 | EXPERIENCE | 현재 진행 중 |
| 완료 | COMPLETE | 감상 완료 |

### 진행도

- 0~100% (10% 단위)
- 진행도 > 0 && 상태 = WISH → 자동으로 EXPERIENCE 전환
- 진행도 = 100% → 자동으로 COMPLETE 전환

### 뷰 모드

| 모드 | 설명 |
|------|------|
| 그리드 | 표지 썸네일 중심, 시각적 탐색 |
| 리스트 | 상세 정보 포함, 효율적 탐색 |

### 필터/정렬

**필터**
- 카테고리별 (도서, 영화, 드라마...)
- 상태별 (전체, 관심, 감상중, 완료)

**정렬**
- 최근 추가순
- 제목순
- 진행률순

---

## 플레이리스트

나만의 컬렉션을 만들어 콘텐츠를 큐레이션한다.

### 기능

| 기능 | 설명 |
|------|------|
| 생성 | 이름, 설명으로 새 플레이리스트 생성 |
| 편집 | 콘텐츠 추가/제거, 순서 변경 |
| 삭제 | 플레이리스트 삭제 (콘텐츠는 유지) |
| 공개 설정 | 공개/비공개 전환 |

### 티어리스트 연동

플레이리스트 내 콘텐츠로 티어리스트 생성 가능.

---

## 콘텐츠 상세

### 화면 구성

```
┌─────────────────────────────────────────┐
│ ← 뒤로                                  │
├─────────────────────────────────────────┤
│ [표지] 제목                             │
│        저자/감독 · 장르                 │
│        [감상 중 ▼]                      │
│        ████████░░ 80%  [+10%]          │
├─────────────────────────────────────────┤
│ [내 기록] [피드]                        │
├─────────────────────────────────────────┤
│ [리뷰] [노트] [창작]                    │
├─────────────────────────────────────────┤
│                                         │
│         (탭 내용)                       │
│                                         │
└─────────────────────────────────────────┘
```

### 탭 구성

| 메인 탭 | 설명 |
|---------|------|
| 내 기록 | 내가 작성한 리뷰/노트/창작 |
| 피드 | 다른 사용자들의 기록 (소셜) |

| 서브 탭 | 설명 |
|---------|------|
| 리뷰 | 별점 + 감상평 |
| 노트 | 과정 속 메모 |
| 창작 | What If, 매체 전환, OST |

---

## 기록 시스템

### 리뷰

완료 후 남기는 종합 평가.

| 필드 | 설명 |
|------|------|
| 별점 | 1~5점 |
| 감상평 | 자유 텍스트 |
| 태그 | 장르/키워드 |
| 스포일러 | 스포일러 여부 |

### 노트

과정 속 메모. 읽으면서, 보면서 떠오르는 생각들.

**섹션 기반 에디터**
- 섹션 추가/삭제/순서 변경
- 마크다운 지원
- 인용구 하이라이트
- 진행도 연동

### 창작

상상의 확장.

| 유형 | 설명 |
|------|------|
| What If | 다른 선택, 다른 결말 상상 |
| 매체 전환 | "이 소설이 영화가 된다면" 캐스팅/연출 |
| OST 상상 | 장면별 음악 선곡 |

---

## 데이터 모델

### contents

| 필드 | 타입 | 설명 |
|------|------|------|
| id | TEXT | 외부 API ID (ISBN 등) |
| type | TEXT | 카테고리 (BOOK, MOVIE, DRAMA...) |
| title | TEXT | 제목 |
| creator | TEXT | 저자/감독/개발사 |
| thumbnail_url | TEXT | 표지 이미지 URL |
| description | TEXT | 설명 |
| metadata | JSONB | 카테고리별 추가 메타데이터 |
| created_at | TIMESTAMPTZ | 생성일 |

### user_contents

| 필드 | 타입 | 설명 |
|------|------|------|
| id | UUID | PK |
| user_id | UUID | 사용자 ID |
| content_id | TEXT | 콘텐츠 ID |
| status | TEXT | 상태 (WISH, EXPERIENCE, COMPLETE) |
| progress | INTEGER | 진행률 (0-100) |
| folder_id | UUID | 폴더 ID (nullable) |
| created_at | TIMESTAMPTZ | 추가일 |
| updated_at | TIMESTAMPTZ | 수정일 |

### records

| 필드 | 타입 | 설명 |
|------|------|------|
| id | UUID | PK |
| user_id | UUID | 사용자 ID |
| content_id | TEXT | 콘텐츠 ID |
| type | TEXT | 타입 (REVIEW, NOTE, QUOTE) |
| content | TEXT | 내용 |
| rating | NUMERIC | 별점 (리뷰용) |
| location | TEXT | 위치 (페이지, 챕터 등) |
| created_at | TIMESTAMPTZ | 생성일 |
| updated_at | TIMESTAMPTZ | 수정일 |

---

## API

### 콘텐츠

| API | 설명 |
|-----|------|
| searchBooks | 알라딘 도서 검색 |
| addContent | 기록관에 콘텐츠 추가 |
| getMyContents | 내 콘텐츠 목록 조회 |
| getContent | 콘텐츠 상세 조회 |
| updateStatus | 상태 변경 |
| updateProgress | 진행도 변경 |
| removeContent | 콘텐츠 삭제 |

### 기록

| API | 설명 |
|-----|------|
| createRecord | 기록 생성 |
| getRecords | 기록 목록 조회 |
| updateRecord | 기록 수정 |
| deleteRecord | 기록 삭제 |

### 노트

| API | 설명 |
|-----|------|
| getNote | 노트 조회 |
| upsertNote | 노트 저장/수정 |
| deleteNote | 노트 삭제 |

### 플레이리스트

| API | 설명 |
|-----|------|
| createPlaylist | 플레이리스트 생성 |
| getPlaylists | 목록 조회 |
| getPlaylist | 상세 조회 |
| updatePlaylist | 수정 |
| updatePlaylistItems | 아이템 수정 |
| deletePlaylist | 삭제 |

---

*01_기록관.md - 최종 수정: 2024.12*
